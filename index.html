<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Alfa Online Radio isiZulu</title>

  <!-- Open Graph / WhatsApp Preview -->
  <meta property="og:title" content="Alfa Online Radio">
  <meta property="og:description" content="Lalela ukufundwa kweBhayibheli ngesiZulu">
  <meta property="og:image" content="https://alfa-zulu.pages.dev/og-image-v4.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:url" content="https://alfa-zulu.pages.dev/">
  <meta property="og:type" content="website">

  <!-- Favicon -->
  <link rel="icon" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16.png">

  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="style.css">

  <!-- LIVE status styles -->
  <style>
    .audio-status {
      margin-top: 0.7rem;
      font-weight: 700;
      letter-spacing: 0.04em;
    }

    .live {
      color: #ff3b3b;
      animation: blink 1.2s infinite;
    }

    .paused {
      color: #cbd5e1;
    }

    .connecting {
      color: #facc15;
    }

    @keyframes blink {
      0%, 50%, 100% { opacity: 1; }
      25%, 75% { opacity: 0.35; }
    }

    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
  </style>
</head>

<body>
  <div class="app">
    <img src="logo.png" alt="Station Logo" class="logo">

    <p class="tagline">
      <span>
        Khetha u-â€œDlala â–¶ï¸ Playâ€ ukuze ulalele ukufundwa kweBhayibheli.
        âš ï¸ğŸ”‡ Ekuqaleni kuba nokuthula cishe imizuzwana engu-10â€“20,
        âš ï¸ğŸ“¢ bese kulandela isikhangiso solimi lwangaphandle
        (imizuzwana engu-30â€“40) ngaphambi kokuba kuqale
        ukufundwa kweZwi likaNkulunkulu.
      </span>
    </p>

    <button id="playBtn" data-cf-analytics="Play Button Click">
      Dlala â–¶ï¸ Play
    </button>

    <div id="audioStatus" class="audio-status paused">
      KUMISIWE â¸ï¸ PAUSED
    </div>

    <!-- ğŸ”— Action buttons -->
    <div class="links">
      <a
        href="https://chat.whatsapp.com/GJou8O7mTyV5J2HpAuTAUc"
        class="btn whatsapp"
        target="_blank"
        rel="noopener"
      >
        <span>Joyina iqembu</span><br>
        <span>ğŸ‘¥ğŸ’¬ labaLaleli ku-WhatsApp</span>
      </a>

      <!-- ğŸ“– isiZulu Bible -->
      <a
        href="https://www.bible.com/af/bible/286/HEB.1.ZUL59"
        class="btn read-bible"
        target="_blank"
        rel="noopener"
      >
        ğŸ“– Funda iBhayibheli ngesiZulu
      </a>

      <!-- â„¹ï¸ Info -->
      <a
        href="https://isizulu.alfaradio.co.za/info"
        class="btn info"
        onclick="if (window.cfBeacon) cfBeacon.trackEvent('zulu_info');"
      >
        â„¹ï¸ Mayelana ne-Alfa Radio
      </a>

      <!-- ğŸ  Home -->
      <a
        href="https://alfaradio.co.za/"
        class="btn home"
      >
        ğŸ  Buyela ekhasini lekhaya
      </a>
    </div>

    <audio id="radio" preload="none" crossorigin="anonymous">
      <source src="https://stream.zeno.fm/u8opaslsv5fvv" type="audio/mpeg">
    </audio>
  </div>

  <footer>
    Â© 2026 Alfa Online Radio
  </footer>

  <!-- âœ… SINGLE, SAFE SCRIPT -->
  <script>
    const audio = document.getElementById("radio");
    const playBtn = document.getElementById("playBtn");
    const statusEl = document.getElementById("audioStatus");

    let retryTimer = null;

    function setStatus(type, text) {
      statusEl.className = "audio-status " + type;
      statusEl.textContent = text;
    }

    async function playStream() {
      playBtn.disabled = true;
      setStatus("connecting", "KUYAXHUMANAâ€¦ â³ CONNECTINGâ€¦");

      try {
        await audio.play();
      } catch {
        scheduleRetry();
      }
    }

    function pauseStream() {
      audio.pause();
      playBtn.textContent = "Dlala â–¶ï¸ Play";
      playBtn.disabled = false;
      setStatus("paused", "KUMISIWE â¸ï¸ PAUSED");
    }

    function scheduleRetry() {
      setStatus("connecting", "ğŸ” KUZAMA FUTHIâ€¦");
      retryTimer = setTimeout(playStream, 3000);
    }

    playBtn.addEventListener("click", () => {
      if (audio.paused) {
        playStream();
      } else {
        pauseStream();
      }
    });

    audio.addEventListener("playing", () => {
      clearTimeout(retryTimer);
      playBtn.disabled = false;
      playBtn.textContent = "Misa kancane â¸ï¸ Pause";
      setStatus("live", "KUYADLALA / BUKHOMA ğŸ”´ LIVE");

      if ("mediaSession" in navigator) {
        navigator.mediaSession.metadata = new MediaMetadata({
          title: "Alfa Online Radio",
          artist: "Live Broadcast",
          artwork: [
            { src: "icon-192.png", sizes: "192x192", type: "image/png" },
            { src: "icon-512.png", sizes: "512x512", type: "image/png" }
          ]
        });
      }
    });

    audio.addEventListener("pause", () => {
      if (!audio.ended) {
        setStatus("paused", "KUMISIWE â¸ï¸ PAUSED");
      }
    });

    audio.addEventListener("error", () => {
      scheduleRetry();
    });
  </script>
</body>
</html>
